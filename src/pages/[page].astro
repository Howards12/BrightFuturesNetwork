---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getEntryBySlug } from "astro:content";

const { page } = Astro.params;

const entry = await getEntryBySlug("pages", page!);
if (!entry) {
  return Astro.redirect("/");
}

const { Content } = await entry.render();
const data = entry.data;
---

<BaseLayout title={`${data.title} | Bright Futures Network`} description={data.description}>
  <section class="section">
    <div class="container">
      <div class="card pad reveal">
        <h1 class="h1">{data.title}</h1>
        <div class="bfn-accent"></div>

        {data.heroImage && (
          <div class="hero-photo" style="margin: 10px 0 16px;">
            <img src={data.heroImage} alt="" loading="lazy" />
          </div>
        )}

        <div class="lead">
          <Content />
        </div>

        {(data.ctaPrimaryLabel && data.ctaPrimaryHref) && (
          <div class="btnrow" style="margin-top: 14px;">
            <a class="cta" href={data.ctaPrimaryHref}>{data.ctaPrimaryLabel}</a>
          </div>
        )}
      </div>
    </div>
  </section>
</BaseLayout>